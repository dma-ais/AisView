<!DOCTYPE html>
<html ng-app="aisHDD">
<head>	
	<title>AIS Historic Data Downloader</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
  <!-- scripts -->
  <!-- styles -->
  <link href="css/columnSelector.css" rel="stylesheet">
  <!-- Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    
  <!-- OpenLayers -->
  <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
  
  <!-- JavaScript plugins (requires jQuery) -->
    	<script src="http://code.jquery.com/jquery.js"></script>
  
  <!-- AngularJS -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
  
  <!-- Underscore -->
  <script src="js/underscore-min.js"></script>
  
  <!-- Bounding Box -->
  <script src="js/bbox.js"></script>
  
  <!-- Angularjs modules & controller -->
  <script src="js/angularFilters.js"></script>
  <script src="js/urlBuilder.js"></script>
  <script src="js/columnSelector.js"></script>
  

	<!-- Max checks on checkboxes -->
	<script type="text/javascript">
	function checkboxLimit(group, max){
		 var size = group.length;
 
		 for (var i = 0; i < size; i++){
				group[ i ].onclick = function()
				{
			 		for( var idx = 0, len = group.length, count = 0, onLimit = false; idx < len && !onLimit; idx++)
						onLimit = (count += group[ idx ].checked - 0) == max;
	 
			 		for( var j = 0; j < len; j++)
						group[ j ].disabled = onLimit ? !group[ j ].checked : false;   
				}
			}
		}
	</script>
	
	<!-- Will be handler script for building url -->
	<script type="text/javascript">
		function handleClick(cb) {
			alert("Click, new value = " + cb.value);
		}
	</script>	

  <style>
  	<!-- TODO: move to stylesheet -->
  	
  	#border #info-box #info #box input[type="text"] {
  float: left;
  margin-top: 10px;
  margin-bottom: 10px;
  height: 25px; 
  width: 650px; 
  outline: none;
}

#border #info-box #info #box input[type="submit"] {
  margin-left: 500px;
  margin-top: 10px;
  margin-bottom: 10px;
  height: 35px; 
  color: #fff;
  font-size: 20px;
  border: 2px solid #fff;
  border-radius: 8px 8px 8px 8px;
  padding-left: 15px;
  padding-right: 15px;
  padding-top: 3px;
  cursor: pointer;  
}
  	
  	
  	#source_id_border { 
  		padding:5px;
			border:2px solid gray;
			
		}
  
  
  	#mapdiv { width:800px; height:400px; }
    div.olControlAttribution { bottom:3px; }
    
    #bbox_drag_instruction { height:1.5em; }
    #bbox_adjust_instruction { height:1.5em; display:none;  }
    
    @media (min-width: 979px) {
    	body {
      	padding-top: 60px;
    	}
		}
	</style>

</head>
<body onload="init();">

<div ng-controller="SourceIds">
  
  <!-- AisStore master nav -->
	<div class="navbar navbar-inverse navbar-fixed-top bs-docs-nav">
  	<div class="container">
    	<a class="navbar-brand">AIS Store Downloader</a>
  	</div>
	</div>

	<!-- AisStore sidebar nav -->
		<div class="container bs-docs-container">
  		<div class="row">
				<div class="col-lg-3">
      		<div class="bs-sidebar" data-spy="affix" data-offset-top="0">
        		<ul class="nav bs-sidenav">      
							<li><a href="#source">Source Filtering</a></li>
							<li><a href="#area-selection">Area Selection</a></li>
							<li><a href="#ship-types">Ship types</a></li>
							<li><a href="#some-other-filter">Some other filter</a></li>
							<li><a href="#output-format">Output Format</a></li>
							<li><a href="#download">Download</a></li>
						</ul>
      		</div>
 				</div>
 	
 					<!-- Content main page-->
 	
					<div class="col-lg-9">
	 					<div class="bs-docs-section">
	     				<div class="page-header">
        				<h1 id="source">Source Filter</h1>
        			</div>
        			
        			<p>The following form can be used to filter the sources that AisData is obtained from:</p>
							<h3 id="source_id">Source ID</h3>
							<p> Select source IDs (maximun of 9)</p> 
							<p> Test: {{url()|capitalize}} </p>
							<div id="source_id_border">
							<div class="row">
							
								<div class="col-lg-3">
									
      							<div ng-repeat="sourceId in sourceIds">
        							<input type="checkbox" ng-model="sourceId.include" ng-click="sourceIdsSelect(sourceId)">
        							<span>{{sourceId.text}}</span>
      							</div>
   								
								</div>
								<div class="col-lg-3">
										
								</div>
								<div class="col-lg-3">
										
								</div>
								<div class="col-lg-3">
											
								</div>		
							</div>	
							</div>
							
							<br>
							<h3 id="source_base">Source base station</h3>						
							<p>Source basestation: multiple inputboxes (max 9 characters), add a new one each time one is filled out</p>
							
							<div ng-repeat="sourceBase in sourceBases">
        				<span>{{sourceBase.text}}</span>
        				<input type="text" ng-model="sourceBase.input" ng-change="newTextFieldBase(sourceBase)">
      				</div>
							
							<br>
							<h3 id="source_country">Source Country</h3>		
							<p>Source country: multiple inputboxes (max 3 characters), add a new one each time one is filled out </p>
							
							<div ng-repeat="sourceCountry in sourceCountries">
        				<span>{{sourceCountry.text}}</span>
        				<input type="text" ng-model="sourceCountry.input" ng-change="newTextFieldCountry(sourceCountry)">
      				</div>  
          		
          		<br>
          		<h3 id="source_type">Source Type</h3>	
          		<p>Source type: Radio -> 3 options Any (default), LIVE, SAT </p>
          		<form name="myForm">
      					<input type="radio" ng-model="sourceTypes" value="any">  Any <br/>
      					<input type="radio" ng-model="sourceTypes" value="live">  LIVE <br/>
      					<input type="radio" ng-model="sourceTypes" value="sat">  SAT <br/>
     					</form>
							
							<br>
							<h3 id="source_region">Source region</h3>	
							
							<p>Clear all source choices</p>	
							<button class="btn" ng-click="clearSources()" >Clear All Source Filters</button>
      				
	 						<br>
							
							
	  					<div class="page-header">
        				<h1 id="area-selection">Area Selection</h1>
        			</div>
        			<p>This map can be used to restrict the area for which Ais Data should be returned from:</p>
        
        			<div id="bbox_drag_instruction">Drag a box:</div>
    					<div id="bbox_adjust_instruction">Adjust the box ...or <input type="button" value="Clear Area Selection" onclick="dragNewBox();"></div>
    					<br>
    					<div id="mapdiv"></div>
    					<div id="bbox_result">
								Top Left (Lat, Lon)
								(<input type="text" id="bbox_result_maxLat" ng-change="test()" ng-model="topLeftLat" size=5>,
								<input type="text" id="bbox_result_minLon" ng-change="test()" ng-model="topLeftLon" size=5>)
								Buttom Right (Lat, Lon)
								(<input type="text" id="bbox_result_minLat" ng-change="test()" ng-model="buttomRightLat" size=5>,
								<input type="text" id="bbox_result_maxLon" ng-change="test()" ng-model="buttomRightLon" size=5>)
							<div/>
	  					<div class="page-header">
        				<h1 id="ship-types">Ship types</h1>
        			</div>
        			<p>"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."</p>
        			
							<div class="page-header">
								<h1 id="some-other-filter">Some other filter</h1>
							</div>
							<p>"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."</p>
							
							<div class="page-header">
								<h1 id="output-format">Output Format</h1>
							</div> 
							<p>"For now just a Radio button with the two choices "Raw format" or "Table format"."</p>
         			
         			<div ng-repeat="urlBuilder in sourceFormat">
        				<input type="radio" ng-model="urlBuilder.include">
        				<span>{{urlBuilder.text}}</span>
      				</div>
         			
         			<form name="myForm">
      					<input type="radio" ng-model="format" value=""> Raw <br/>
      					<input type="radio" ng-model="format" value="format=table&">  Table <br/>
     					</form>
         			
         			<div ng-controller="columnSelector">
         			
         			<div id="columnWrapperFirst">
        				<ul id="columnList">
            			<li id="columnListElement" ng-repeat="column in columns | filter: { include: 'false' }" ng-click="addColumn(column)">
                		<span class="done-{{column.text}}">{{column.text}}</span>
            			</li>
        				</ul>
    					</div>
         			<div id="columnWrapper">
        				<ul id="columnList">
            			<li id="columnListElement" ng-repeat="column in columns | filter: { include: 'true' }" ng-click="removeColumn(column)">
                		<span class="done-{{column.text}}">{{column.text}}</span>
            			</li>
        				</ul>
    					</div>
    					</div>
         			
         			
         			
         			
	  					<div class="page-header">
        				<h1 id="download">Download</h1>
        			</div>
        			<p>"InputForm with final request parameter."</p>
      				
      				<h3>{{url()}}</h3>
      				
      				<div class="navbar">	
        				<form class="navbar-form pull-left">
        					<input type="text" class="form-control" ng-model="samples" style="width: 100px;" placeholder="#samples">
          				<button type="submit" class="btn btn-default">Show Sample</button>
          				<button type="submit" class="btn btn-default">Download</button>
        				</form>
      				</div>
        			<p>"A button "Download" right aligned below the request box. url for button->/store?......"</p>

					</div>
				</div>
			</div>
	
    	
    	<!-- Include all compiled plugins (below), or include individual files as needed -->
    	<script src="js/bootstrap.min.js"></script>
    	<!-- Optionally enable responsive features in IE8 -->
    	<script src="js/respond.js"></script>
    	
    	<script type="text/javascript">
				
				function AllInputsFilled(inputID) {
    			return $("input[type='text']", $(inputID)).filter(function() {
        		return $(this).val().trim() === "";
    				}).size() === 0;
					}

					function AdditionEvent(inputID,maxChars,length) {
    			if (AllInputsFilled(inputID)) {
        	AddInput(inputID,maxChars,length);    
    			}
				}

				function AddInput(inputID,maxChars,length) {
					var cnt = $("input[type='text']", $(inputID)).size() + 1;
					$("<br><span>" + cnt +'. ' + "</span><input type='text' maxlength="+ maxChars +" size=" + length + " name='achievement"  + cnt+ "' id='achievement" + cnt+ "' />").insertAfter(inputID +" input[type='text']:last");
					$("input", $(inputID)).unbind("keyup").bind("keyup", function(){ AdditionEvent(inputID,maxChars,length) });

				}
				
				$("input", $("#achievementf1")).bind("keyup", function(){ AdditionEvent('#achievementf1',9,100) });
				$("input", $("#achievementf2")).bind("keyup", function(){ AdditionEvent('#achievementf2',3,30) });
				
			</script>
			
			<!-- ng-controller div ends-->
			</div>
			
  </body>
</html>